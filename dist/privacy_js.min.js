class Privacy{constructor(e={}){this.settings={containerId:"AICPrivacy",wrapperId:"AICPrivacy_wrapper",cookiePrefix:"AIC_P_",cookieDuration:395,cookieVersion:1,language:"en",position:"bottom",name:"My Website",privacyPolicyURL:"/privacy-policy",vendors:[],translations:{en:{body:"Welcome to {name}. We use cookies to improve your experience. <a href='{privacyPolicyURL}'>Read Policy</a>",acceptall:"Accept All",acceptonlynecessary:"Only Necessary",linktraceurs:"Custom Settings",savesettings:"Save and Close",necessary_title:"Technical Cookies",necessary_desc:"These cookies are essential for the website to function properly and to remember your privacy choices."}},triggerClass:"aic_p_linkcookie",...e},this.translations=this.settings.translations,0===this.settings.vendors.length&&console.warn("Privacy_js: No optional vendors defined. The banner will only handle necessary cookies."),this.init()}init(){this.injectStructure(),this.bindGlobalTriggers();const e=this.getCookieValue(this.settings.cookiePrefix+"version");"1"!==this.getCookieValue(this.settings.cookiePrefix+"done")||e!==String(this.settings.cookieVersion)?this.showInfos():this.hide()}injectStructure(){if(document.getElementById(this.settings.containerId))return;const e=document.createElement("div");e.id=this.settings.containerId,e.className=`aic_p_main_container display_${this.settings.position} display_none`,document.body.appendChild(e);const t=document.createElement("div");t.id=this.settings.wrapperId,t.className="aic_p_wrapper",e.appendChild(t)}showInfos(){const e=document.getElementById(this.settings.wrapperId),t=document.getElementById(this.settings.containerId);t.classList.remove("display_none"),t.className=`aic_p_main_container display_${this.settings.position}`;let s=`\n            <div class="aic_p_body">\n                ${this.trad("body").replace(/{name}/g,this.settings.name).replace(/{privacyPolicyURL}/g,this.settings.privacyPolicyURL)}\n            </div>\n            <div class="aic_p_buttons">\n                <button class="aic_p_acceptall">${this.trad("acceptall")}</button>\n                <button class="aic_p_acceptonlynecessary">${this.trad("acceptonlynecessary")}</button>\n                <button class="aic_p_linktraceurs">${this.trad("linktraceurs")}</button>\n            </div>\n        `;e.innerHTML=s,this.bindBannerEvents()}showSettings(){const e=document.getElementById(this.settings.wrapperId);document.getElementById(this.settings.containerId).className="aic_p_main_container display_middle";let t='<div class="aic_p_vendors">';t+=this.renderVendorRow({id:"necessary",name:this.trad("necessary_title"),description:this.trad("necessary_desc")},!0),this.settings.vendors.forEach(e=>{t+=this.renderVendorRow(e,!1)}),t+=`<button class="aic_p_save_btn">${this.trad("savesettings")}</button></div>`,e.innerHTML=t,e.querySelector(".aic_p_save_btn").onclick=()=>this.saveCustomSettings()}renderVendorRow(e,t){const s=this.settings.cookiePrefix+"setting_"+e.id,i=t||"1"===this.getCookieValue(s);return`\n            <div class="aic_p_vendor_opt">\n                <input type="checkbox" id="v_${e.id}" name="${s}" \n                       ${i?"checked":""} ${t?"disabled":""}>\n                <label for="v_${e.id}">\n                    <div class="aic_p_vendor_title">${e.name}</div>\n                    <div class="aic_p_vendor_body">${e.description.replace(/{name}/g,this.settings.name)}</div>\n                </label>\n            </div>\n        `}saveCustomSettings(){this.setCookieValue(this.settings.cookiePrefix+"setting_necessary","1"),this.settings.vendors.forEach(e=>{const t=document.getElementById(`v_${e.id}`);t&&this.setCookieValue(this.settings.cookiePrefix+"setting_"+e.id,t.checked?"1":"0")}),this.completeConsent()}acceptAll(){this.setCookieValue(this.settings.cookiePrefix+"setting_necessary","1"),this.settings.vendors.forEach(e=>{this.setCookieValue(this.settings.cookiePrefix+"setting_"+e.id,"1")}),this.completeConsent()}acceptNecessary(){this.setCookieValue(this.settings.cookiePrefix+"setting_necessary","1"),this.settings.vendors.forEach(e=>{this.setCookieValue(this.settings.cookiePrefix+"setting_"+e.id,"0")}),this.completeConsent()}completeConsent(){this.setCookieValue(this.settings.cookiePrefix+"done","1"),this.setCookieValue(this.settings.cookiePrefix+"version",this.settings.cookieVersion),this.hide(),window.dispatchEvent(new CustomEvent("artIsPrivacyUpdated",{detail:this}))}hide(){const e=document.getElementById(this.settings.containerId);e&&(e.className="aic_p_main_container display_none")}trad(e){const t=this.settings.language;return this.translations[t]&&this.translations[t][e]?this.translations[t][e]:this.translations.en&&this.translations.en[e]?this.translations.en[e]:(console.error(`Privacy_js: CRITICAL - Translation key [${e}] not found!`),`[[MISSING_TRAD:${e}]]`)}bindBannerEvents(){const e=document.getElementById(this.settings.containerId);e&&(e.querySelector(".aic_p_acceptall").onclick=()=>this.acceptAll(),e.querySelector(".aic_p_acceptonlynecessary").onclick=()=>this.acceptNecessary(),e.querySelector(".aic_p_linktraceurs").onclick=()=>this.showSettings())}bindGlobalTriggers(){document.addEventListener("click",e=>{e.target.closest(`.${this.settings.triggerClass}`)&&(e.preventDefault(),this.showSettings())})}hasConsent(e){return"necessary"===e||"1"===this.getCookieValue(this.settings.cookiePrefix+"setting_"+e)}getCookieValue(e){let t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}setCookieValue(e,t){const s=new Date;s.setTime(s.getTime()+24*this.settings.cookieDuration*60*60*1e3),document.cookie=`${e}=${t}; path=/; expires=${s.toGMTString()}; SameSite=Lax`}}export{Privacy};"undefined"!=typeof window&&(window.AIC_Privacy=Privacy);